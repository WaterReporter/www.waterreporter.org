<div class="map--wrapper">
  <leaflet class="map" markers="page.map.markers" defaults="page.map.defaults" layers="page.map.layers" center="page.map.center" bounds="page.map.bounds"></leaflet>

  <div id="map--vignette" class="map--vignette" data-ng-click="page.hideVignette()">
  </div>

  <div class="features" data-ng-if="page.map.geojson.reports.data.features.length">
    <div class="features--container" data-ng-show="page.features.visible === $index"
         data-ng-repeat="report in page.map.geojson.reports.data.features track by $index">
      <div class="features--report"
           data-ng-swipe-left="page.changeFeature(page.map.geojson.reports.data.features[$index+1], $index+1)"
           data-ng-swipe-right="page.changeFeature(page.map.geojson.reports.data.features[$index-1], $index-1)">
        <div data-ng-include="'/modules/shared/views/feature--view.html'"></div>
      </div>
    </div>
  </div>

</div>

<div class="throbber" data-ng-if="!page.map.geojson.reports.data.features.length && !page.search.data.features.length"></div>
