<div data-ng-if="!page.comment.edit" class="report--comments--comment report--comments--form">

  <a class="report--comment--avatar" href="/profiles/{{ $root.user.id }}">
    <img data-ng-src="{{ $root.user.properties.picture }}"
         width="64" />
  </a>

  <p class="report--comment--author">
    <a href="/profiles/{{ $root.user.id }}">
      {{ $root.user.properties.first_name }} {{ $root.user.properties.last_name }}
    </a>
  </p>

  <div class="throbber" data-ng-if="page.comment.loading"></div>

  <form data-ng-if="page.permissions.isLoggedIn && !page.comment.loading" class="site--report--comment form" role="form" id="form--reports--comment" name="form--reports--comment">

    <div class="form-group">
      <textarea id="report--commentBody" name="report--commentBody" class="form--control" data-ng-model="page.comment.data.body" placeholder="Join the conversation">
      </textarea>
      <a class="form--control--toggle"
         data-ng-if="!page.commentFileField"
         data-ng-click="page.commentFileField =! page.commentFileField">
         + Add Image
      </a>
      <input type="file" id="report--commentImage" name="report--commentImage"
             class="form--control form--control--file"
             file-model="page.image" data-ng-if="page.commentFileField" />
    </div>
    <button data-ng-if="page.permissions.isAdmin && page.report.properties.state !== 'closed'" data-ng-if="page.report.properties.state !== 'closed'" class="button button--info" data-ng-click="page.comment.close(page.report.id)">
      Close Report
    </button>
    <button data-ng-if="page.permissions.isAdmin && page.report.properties.state === 'closed'" data-ng-if="page.report.properties.state === 'closed'" class="button button--info" data-ng-click="page.comment.open(page.report.id)">
      Reopen Report
    </button>
    <button id="report--comment--submit" name="report--comment--submit" class="button" data-ng-click="page.comment.save(page.report.id)">
      Comment
    </button>
  </form>

</div>
